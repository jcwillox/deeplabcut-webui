var q=Object.defineProperty;var B=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var R=(i,e,a)=>e in i?q(i,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[e]=a,j=(i,e)=>{for(var a in e||(e={}))I.call(e,a)&&R(i,a,e[a]);if(B)for(var a of B(e))W.call(e,a)&&R(i,a,e[a]);return i};import{d as z,a as S,c as k,b as H,o as y,e as b,w as d,f as u,V as J,g as U,h as A,i as O,j as D,k as G,l as Q,u as v,m as w,n as F,p as K,q as X,r as _,s as h,t as Y,v as Z,x as ee,y as te,z as oe,A as E,B as ae,F as le,C as se,T as ne,K as re,D as ie,E as ue,G as de,H as T,I as ce,J as pe,L as me,M as fe,R as ve,N as ye,O as he,P as _e,Q as C,S as ge,U as Ve,W as be,X as ke,Y as we}from"./vendor.72e687a3.js";const Se=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const t of l.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&r(t)}).observe(document,{childList:!0,subtree:!0});function a(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=a(o);fetch(o.href,l)}};Se();const $e=z({id:"global",state:()=>({project:"",video:"",backend:"http://127.0.0.1:8000"}),actions:{resetProject(){this.project="",this.video=""}}}),Te=_("Settings"),xe=_("mdi-close"),Ce=S({props:{modelValue:{type:Boolean},theme:null},emits:["update:modelValue","update:theme"],setup(i,{emit:e}){const a=i,r=$e(),o=k({get:()=>a.modelValue,set:t=>e("update:modelValue",t)}),l=k({get:()=>H(a.theme),set:t=>{e("update:theme",t.toLowerCase())}});return(t,s)=>(y(),b(X,{modelValue:v(o),"onUpdate:modelValue":s[3]||(s[3]=n=>w(o)?o.value=n:null),temporary:"",position:"right",width:300},{default:d(()=>[u(G,null,{default:d(()=>[u(J,null,{default:d(()=>[Te]),_:1}),u(U),u(A,{icon:"",onClick:s[0]||(s[0]=O(n=>o.value=!1,["stop"]))},{default:d(()=>[u(D,null,{default:d(()=>[xe]),_:1})]),_:1})]),_:1}),u(K,null,{default:d(()=>[u(Q,{items:["Auto","Light","Dark"],class:"pb-3",modelValue:v(l),"onUpdate:modelValue":s[1]||(s[1]=n=>w(l)?l.value=n:null),label:"Theme","hide-details":""},null,8,["modelValue"]),u(F,{label:"Backend",modelValue:v(r).backend,"onUpdate:modelValue":s[2]||(s[2]=n=>v(r).backend=n),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]))}});const Fe=_("mdi-movie"),Ee=T("span",null,"Hello_World.mp4",-1),Le=S({setup(i){const e=h(!1),a=Y("theme","auto"),r=Z(),o=k(()=>a.value=="auto"?r.value:a.value),l=ce(),t=h(window.location.pathname.substring(1)||"extract"),s=["extract","label","analyse"];return ee(l,()=>{l.name=="home"?t.value="extract":t.value=l.name}),(n,m)=>{const g=pe("router-view");return y(),b(de,{theme:v(o)},{default:d(()=>[u(Ce,{modelValue:e.value,"onUpdate:modelValue":m[0]||(m[0]=p=>e.value=p),theme:v(a),"onUpdate:theme":m[1]||(m[1]=p=>w(a)?a.value=p:null)},null,8,["modelValue","theme"]),u(te,{app:"",fixed:"",color:"primary-darken-1"},{default:d(()=>[u(D,{class:"pr-3"},{default:d(()=>[Fe]),_:1}),Ee,u(U)]),_:1}),u(se,{color:"primary",density:"compact",flat:"",app:""},{prepend:d(()=>[u(oe,{modelValue:t.value,"onUpdate:modelValue":m[2]||(m[2]=p=>t.value=p)},{default:d(()=>[(y(),E(le,null,ae(s,p=>u(me,{key:p,value:p,to:"/"+p},{default:d(()=>[_(fe(p),1)]),_:2},1032,["value","to"])),64))]),_:1},8,["modelValue"])]),append:d(()=>[u(A,{icon:"mdi-cog",onClick:m[3]||(m[3]=O(p=>e.value=!0,["stop"]))})]),_:1}),u(ue,null,{default:d(()=>[u(g,null,{default:d(({Component:p})=>[u(ne,null,{default:d(()=>[(y(),b(re,null,[(y(),b(ie(p)))],1024))]),_:2},1024)]),_:1})]),_:1})]),_:1},8,["theme"])}}}),Be={class:"about"},Re=_(" This is an about page, return to "),je=_("extract"),Pe=_(". "),P=S({setup(i){return(e,a)=>(y(),E("div",Be,[T("h3",null,[Re,u(v(ve),{to:"/extract"},{default:d(()=>[je]),_:1}),Pe])]))}});function $(i){const e=String(~~(i/3600)).padStart(2,"0"),a=String(~~(i%3600/60)).padStart(2,"0"),r=String(~~i%60).padStart(2,"0"),o=String(~~((i-~~i)*1e3)).padStart(3,"0");return`${e}:${a}:${r}.${o}`}const Ne=S({props:{options:null,fps:null},emits:["playerReady"],setup(i,{expose:e,emit:a}){const r=i;let o=h(null),l=h(null),t=h(0),s=h($(0)),n=0;ye(()=>{var c;l.value=he(o.value,j({fluid:!0,muted:!0},r.options),()=>a("playerReady",l.value)),(c=o.value)==null||c.requestVideoFrameCallback(m)});const m=(c,f)=>{var V;console.debug(c,f),f.presentedFrames==1&&f.mediaTime>0&&(console.log("accounting for video start drift of",f.mediaTime),n=f.mediaTime),t.value=Math.round((f.mediaTime-n)*r.fps),s.value=$(f.mediaTime-n),(V=o.value)==null||V.requestVideoFrameCallback(m)},g=c=>{l.value&&!l.value.paused()&&l.value.pause(),L(t.value+c)},p=(c=1)=>{g(c)},M=(c=1)=>{g(-c)},L=c=>{var V;const f=c/r.fps+n;console.log(`seeking to: ${c} (${$(f)})`,f),n&&console.log(`actual    : ${c} (${$(f-n)})`,f-n),(V=l.value)==null||V.currentTime(f+1e-5)};return e({frame:t,timecode:s,videojs:l,videoEl:o,seek:g,seekTo:L,seekForward:p,seekBackward:M}),(c,f)=>(y(),E("video",{ref_key:"videoEl",ref:o,class:"video-js vjs-big-play-centered",preload:"metadata",controls:""},[_e(c.$slots,"default")],512))}}),Ue={class:"d-flex pa-2"},Ae=T("source",{src:"https://daiz.github.io/frame-accurate-ish/time.mp4",type:"video/mp4"},null,-1),Oe=S({setup(i){let e=h(null);const a=k(()=>{var t;return((t=e.value)==null?void 0:t.timecode)||0}),r=k({get:()=>{var t;return((t=e.value)==null?void 0:t.frame)||0},set:t=>{var s;(s=e.value)==null||s.seekTo(Number(t))}}),o=t=>{console.log("player-ready",t)},l=()=>{var t,s,n,m;(s=(t=e.value)==null?void 0:t.videojs)!=null&&s.paused()?e.value.videojs.play():(m=(n=e.value)==null?void 0:n.videojs)==null||m.pause()};return(t,s)=>(y(),b(K,{fluid:"",class:"pa-0 fill-height"},{default:d(()=>[T("div",Ue,[u(F,{label:"Frame",variant:"outlined",density:"compact",modelValue:v(r),"onUpdate:modelValue":s[0]||(s[0]=n=>w(r)?r.value=n:null),"hide-details":"","persistent-placeholder":""},null,8,["modelValue"]),u(F,{class:"pl-2",label:"Timecode",variant:"outlined",density:"compact",modelValue:v(a),"onUpdate:modelValue":s[1]||(s[1]=n=>w(a)?a.value=n:null),readonly:"","hide-details":"","persistent-placeholder":""},null,8,["modelValue"])]),u(Ne,{ref_key:"player",ref:e,fps:23.976,onPlayerReady:o,onKeydown:[C(l,["space"]),s[2]||(s[2]=C(()=>{var n;return(n=e.value)==null?void 0:n.seekBackward()},["left"])),s[3]||(s[3]=C(()=>{var n;return(n=e.value)==null?void 0:n.seekForward()},["right"]))]},{default:d(()=>[Ae]),_:1},8,["fps","onKeydown"])]),_:1}))}}),De=ge({history:Ve("/deeplabcut-webui/"),routes:[{path:"/",name:"home",redirect:()=>({name:"extract"})},{path:"/extract",name:"extract",component:Oe},{path:"/label",name:"label",component:P},{path:"/analyse",name:"analyse",component:P}]});const Ke="modulepreload",N={},Me="/deeplabcut-webui/",qe=function(e,a){return!a||a.length===0?e():Promise.all(a.map(r=>{if(r=`${Me}${r}`,r in N)return;N[r]=!0;const o=r.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${l}`))return;const t=document.createElement("link");if(t.rel=o?"stylesheet":Ke,o||(t.as="script",t.crossOrigin=""),t.href=r,document.head.appendChild(t),o)return new Promise((s,n)=>{t.addEventListener("load",s),t.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};async function Ie(){(await qe(()=>import("./webfontloader.ccf6ba4d.js").then(function(e){return e.w}),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}Ie();var We=be({theme:{variations:{colors:["primary","secondary"],lighten:1,darken:2},themes:{light:{colors:{primary:"#2196F3",secondary:"#E91E63"}},dark:{dark:!0,colors:{primary:"#212121",secondary:"#E91E63"}}}}});const x=ke(Le);x.use(we());x.use(De);x.use(We);x.mount("#app");
